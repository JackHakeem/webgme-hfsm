import "constants.bgs"
import "globals.bgs"
# Import user libraries here (if any)
<%
if (model.Library_list) {
  model.Library_list.map(function(library) {
-%>
import "<%- library.name %>.bgs"
<%
  });
}
-%>

# The timer handles all the state function code and state transition
#  code
event hardware_soft_timer(handle)
  changeState = 0
  # Generated code to execute state transitions and state functions
<%
if (model.State_list) {
  model.State_list.map(function(state) {
-%>
<%- state.timerFunc %>
<%
  });
}
-%>
end

# The interrupt routine handles all conversion from input interrupts
#  to state variables for state transitions
event hardware_io_port_status(timestamp, port, irq, state_io)
  # user code to handle the interrupts and convert them to state
  #  variables
<%- model.hardware_io_port_status %>

  changeState = 0
  # Generated code to perform needed state transitions
<%
if (model.State_list) {
  model.State_list.map(function(state) {
-%>
<%- state.irqFunc %>
<%
  });
}
-%>
end
<%
if (model.Event_list) {
  model.Event_list.map(function(event) {
-%>

<%- event.function %>
<%
  });
}
-%>
